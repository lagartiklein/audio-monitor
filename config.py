# config.py - Configuración unificada del sistema

# === MODOS DE OPERACIÓN ===
OPERATION_MODE = "dual"  # "web", "native", "dual"

# === CONFIGURACIÓN AUDIO BÁSICA ===
SAMPLE_RATE = 48000
BLOCKSIZE = 256
DTYPE = 'float32'
CHANNELS_MAX = 32
QUEUE_SIZE = 10
MAX_CLIENTS = 8

# === CONFIGURACIÓN WEB (Browser) ===
WEB_ENABLED = True
WEB_PORT = 5100
WEB_HOST = '0.0.0.0'
WEB_LATENCY_TARGET = 30  # ms
WEB_JITTER_BUFFER = 30   # ms
PING_INTERVAL = 5
PING_TIMEOUT = 10

# === CONFIGURACIÓN NATIVE (APK) ===
NATIVE_ENABLED = True
NATIVE_PORT = 5101
NATIVE_HOST = '0.0.0.0'
NATIVE_LATENCY_TARGET = 8    # ¡OBJETIVO: 3-10ms!
NATIVE_CHUNK_SIZE = 256      # 5.3ms @ 48kHz
NATIVE_BUFFER_PACKETS = 2
NATIVE_PROTOCOL = 'TCP'
NATIVE_PRIORITY = 'realtime'
NATIVE_MAGIC_NUMBER = 0xA1D10A7C
NATIVE_PROTOCOL_VERSION = 1
NATIVE_HEADER_SIZE = 12
NATIVE_MAX_CLIENTS = 10
NATIVE_HEARTBEAT_INTERVAL = 2.0

# === DEBUG ===
VERBOSE = True
LOG_NATIVE_PACKETS = False
MEASURE_LATENCY = True

# === CONFIGURACIÓN WEBRTC (opcional) ===
WEBRTC_ENABLED = False
WEBRTC_AUDIO_CODEC = 'opus'
OPUS_BITRATE = 96000
OPUS_COMPLEXITY = 10
OPUS_FRAME_DURATION = 20
OPUS_PACKET_LOSS_PERC = 10

# ICE Servers
STUN_SERVERS = [
    'stun:stun.l.google.com:19302',
    'stun:stun1.l.google.com:19302',
    'stun:stun2.l.google.com:19302'
]

# WebRTC Specific
DATA_CHANNEL_PROTOCOL = 'audio-monitor-v1'
MAX_PACKET_SIZE = 1200
USE_DTX = False
USE_FEC = True